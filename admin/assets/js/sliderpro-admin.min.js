(function(a){var h={slides:[],slideCounter:0,postsData:{},allowSlideImageResize:!0,init:function(){"single"===sp_js_vars.page?this.initSingleSliderPage():"all"===sp_js_vars.page&&this.initAllSlidersPage()},initSingleSliderPage:function(){var c=this;this.initSlides();-1!==parseInt(sp_js_vars.id,10)&&this.loadSliderData(function(){c.checkSlideImageSize()});a("form").on("submit",function(a){a.preventDefault();c.saveSlider();c.checkSlideImageSize()});a(".preview-slider").on("click",function(a){a.preventDefault();
c.previewSlider()});a(".add-slide").on("click",function(a){a.preventDefault();c.addImageSlides()});a(".postbox .hndle, .postbox .handlediv").on("click",function(){var b=a(this).parent(".postbox");!0===b.hasClass("closed")?b.removeClass("closed"):b.addClass("closed")});a(".sidebar-settings").on("mouseover","label",function(){c.showInfo(a(this))});a(window).resize(function(){!0===c.allowSlideImageResize&&(c.resizeSlideImages(),c.allowSlideImageResize=!1,setTimeout(function(){c.resizeSlideImages();c.allowSlideImageResize=
!0},250))})},initAllSlidersPage:function(){var c=this;a(".sliders-list").on("click",".preview-slider",function(b){b.preventDefault();c.previewSliderAll(a(this))});a(".sliders-list").on("click",".delete-slider",function(b){b.preventDefault();c.deleteSlider(a(this))});a(".sliders-list").on("click",".duplicate-slider",function(b){b.preventDefault();c.duplicateSlider(a(this))});a(".clear-all-cache").on("click",function(b){b.preventDefault();a(".clear-cache-spinner").css({display:"inline-block",visibility:"visible"});
b=a(this).attr("data-nonce");a.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_lite_clear_all_cache",nonce:b},complete:function(b){a(".clear-cache-spinner").css({display:"",visibility:""})}})})},loadSliderData:function(c){var b=this;a(".slide-spinner").css({display:"inline-block",visibility:"visible"});a.ajax({url:sp_js_vars.ajaxurl,type:"get",data:{action:"sliderpro_lite_get_slider_data",id:sp_js_vars.id,nonce:sp_js_vars.lad_nonce},complete:function(d){d=a.parseJSON(d.responseText);
a.each(d.slides,function(c,d){var f={mainImage:{},thumbnail:{},caption:d.caption,layers:d.layers,html:d.html,settings:a.isArray(d.settings)?{}:d.settings};a.each(d,function(a,b){-1!==a.indexOf("main_image")?f.mainImage[a]=b:-1!==a.indexOf("thumbnail")&&(f.thumbnail[a]=b)});b.getSlide(c).setData("all",f)});a(".slide-spinner").css({display:"",visibility:""});c()}})},saveSlider:function(){var c=this.getSliderData();c.nonce=sp_js_vars.sa_nonce;c.action="save";c=JSON.stringify(c);var b=a(".update-spinner").css({display:"inline-block",
visibility:"visible"});a.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_lite_save_slider",data:c},complete:function(c){b.css({display:"",visibility:""});-1===parseInt(sp_js_vars.id,10)&&!1===isNaN(c.responseText)?(a("h2").after('<div class="updated"><p>'+sp_js_vars.slider_create+"</p></div>"),window.location=sp_js_vars.admin+"?page=sliderpro-lite&id="+c.responseText+"&action=edit"):0===a(".updated").length&&a("h2").after('<div class="updated"><p>'+sp_js_vars.slider_update+"</p></div>")}})},
getSliderData:function(){var c=this,b={id:sp_js_vars.id,name:a("input#title").val(),settings:{},slides:[],panels_state:{}};a(".slides-container").find(".slide").each(function(d){var f=a(this),l=c.getSlide(parseInt(f.attr("data-id"),10)).getData("all");l.position=parseInt(f.attr("data-position"),10);b.slides[d]=l});a(".sidebar-settings").find(".setting").each(function(){var c=a(this);b.settings[c.attr("name")]="checkbox"===c.attr("type")?c.is(":checked"):c.val()});a(".sidebar-settings").find(".postbox").each(function(){var c=
a(this);b.panels_state[c.attr("data-name")]=c.hasClass("closed")?"closed":""});return b},previewSlider:function(){k.open(this.getSliderData())},previewSliderAll:function(c){var b=a.lightURLParse(c.attr("href"));c=b.lad_nonce;b=parseInt(b.id,10);a.ajax({url:sp_js_vars.ajaxurl,type:"get",data:{action:"sliderpro_lite_get_slider_data",id:b,nonce:c},complete:function(b){b=a.parseJSON(b.responseText);k.open(b)}})},deleteSlider:function(c){var b=a.lightURLParse(c.attr("href")),d=b.da_nonce,f=parseInt(b.id,
10),l=c.parents("tr"),e=a('<div class="modal-overlay"></div><div class="modal-window-container">\t<div class="modal-window delete-slider-dialog">\t\t<p class="dialog-question">'+sp_js_vars.slider_delete+'</p>\t\t<div class="dialog-buttons">\t\t\t<a class="button dialog-ok" href="#">'+sp_js_vars.yes+'</a>\t\t\t<a class="button dialog-cancel" href="#">'+sp_js_vars.cancel+"</a>\t\t</div>\t</div></div>").appendTo("body");a(".modal-window-container").css("top",a(window).scrollTop());e.find(".dialog-ok").one("click",
function(b){b.preventDefault();a.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_lite_delete_slider",id:f,nonce:d},complete:function(a){f===parseInt(a.responseText,10)&&l.fadeOut(300,function(){l.remove()})}});e.remove()});e.find(".dialog-cancel").one("click",function(a){a.preventDefault();e.remove()});e.find(".modal-overlay").one("click",function(a){e.remove()})},duplicateSlider:function(c){var b=a.lightURLParse(c.attr("href"));c=b.dua_nonce;b=parseInt(b.id,10);a.ajax({url:sp_js_vars.ajaxurl,
type:"post",data:{action:"sliderpro_lite_duplicate_slider",id:b,nonce:c},complete:function(b){a(b.responseText).appendTo(a(".sliders-list tbody")).hide().fadeIn()}})},initSlides:function(){var c=this;a(".slides-container").find(".slide").each(function(b){c.initSlide(a(this))});a(".slides-container").lightSortable({children:".slide",placeholder:"slide slide-placeholder",sortEnd:function(b){a(".slide").each(function(b){a(this).attr("data-position",b)})}})},initSlide:function(a,b){var c=this,f=new e(a,
this.slideCounter,b);this.slides.push(f);f.on("duplicateSlide",function(a){c.duplicateSlide(a.slideData)});f.on("deleteSlide",function(a){c.deleteSlide(a.id)});a.attr("data-id",this.slideCounter);a.attr("data-position",this.slideCounter);this.slideCounter++},getSlide:function(c){var b;a.each(this.slides,function(a,f){if(f.id===c)return b=f,!1});return b},duplicateSlide:function(c){var b=this,d=a.extend(!0,{},c);a.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_lite_add_slides",data:JSON.stringify([{settings:{content_type:d.settings.content_type},
main_image_source:d.mainImage.main_image_source}])},complete:function(c){c=a(c.responseText).appendTo(a(".slides-container"));b.initSlide(c,d)}})},deleteSlide:function(c){var b=this,d=b.getSlide(c),f=a('<div class="modal-overlay"></div><div class="modal-window-container">\t<div class="modal-window delete-slide-dialog">\t\t<p class="dialog-question">'+sp_js_vars.slide_delete+'</p>\t\t<div class="dialog-buttons">\t\t\t<a class="button dialog-ok" href="#">'+sp_js_vars.yes+'</a>\t\t\t<a class="button dialog-cancel" href="#">'+
sp_js_vars.cancel+"</a>\t\t</div>\t</div></div>").appendTo("body");a(".modal-window-container").css("top",a(window).scrollTop());f.find(".dialog-ok").one("click",function(c){c.preventDefault();d.off("duplicateSlide");d.off("deleteSlide");d.remove();f.remove();b.slides.splice(a.inArray(d,b.slides),1)});f.find(".dialog-cancel").one("click",function(a){a.preventDefault();f.remove()});f.find(".modal-overlay").one("click",function(a){f.remove()})},addImageSlides:function(){var c=this;g.open(function(b){var d=
[];a.each(b,function(a,b){d.push({main_image_id:b.id,main_image_source:b.url,main_image_alt:b.alt,main_image_title:b.title,main_image_width:b.width,main_image_height:b.height,caption:b.caption})});a.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_lite_add_slides",data:JSON.stringify(d)},complete:function(b){var f=a(".slides-container").find(".slide").length-1;a(".slides-container").append(b.responseText).find(".slide"+(-1===f?"":":gt("+f+")")).each(function(b){var f=a(this);c.initSlide(f,
{mainImage:d[b],thumbnail:{},caption:d[b].caption,layers:{},html:"",settings:{}})});h.checkSlideImageSize()}})})},showInfo:function(c){var b=c.attr("data-info"),d=null;"undefined"!==typeof b&&(d=a('<div class="info-tooltip">'+b+"</div>").appendTo(c.parent()),d.css({left:-d.outerWidth(!0),marginTop:.5*-d.outerHeight(!0)-9}));c.on("mouseout",function(){null!==d&&d.remove()})},resizeSlideImages:function(){var c=a(".slide-preview").width()/a(".slide-preview").height();a(".slide-preview > img").each(function(){var b=
a(this);b.width()/b.height()>c?b.css({width:"auto",height:"100%"}):b.css({width:"100%",height:"auto"})})},checkSlideImageSize:function(c){if(0!==a(".image-size-warning").length){var b=!1,d=a(".sidebar-settings").find('.setting[name="width"]').val(),f=a(".sidebar-settings").find('.setting[name="height"]').val();a.each(this.slides,function(a,c){var e=c.getData("mainImage");0!==parseInt(e.main_image_width,10)&&0!==parseInt(e.main_image_height,10)&&(!1===isNaN(d)&&parseInt(e.main_image_width,10)<parseInt(d,
10)||!1===isNaN(f)&&parseInt(e.main_image_height,10)<parseInt(f,10))&&(b=!0)});!0===b?a(".image-size-warning").css("display","block"):a(".image-size-warning").css("display","")}}},e=function(c,b,d){this.$slide=c;this.id=b;this.data=d;this.events=a({});"undefined"===typeof this.data&&(this.data={mainImage:{},thumbnail:{},caption:"",layers:{},html:"",settings:{}});this.init()};e.prototype={init:function(){var a=this;this.$slide.find(".slide-preview").on("click",function(b){g.open(function(b){b=b[0];
a.setData("mainImage",{main_image_id:b.id,main_image_source:b.url,main_image_alt:b.alt,main_image_title:b.title,main_image_width:b.width,main_image_height:b.height});a.setData("caption",b.caption);a.updateSlidePreview();h.checkSlideImageSize()})});this.$slide.find(".delete-slide").on("click",function(b){b.preventDefault();a.trigger({type:"deleteSlide",id:a.id})});this.$slide.find(".duplicate-slide").on("click",function(b){b.preventDefault();a.trigger({type:"duplicateSlide",slideData:a.data})});this.resizeImage()},
getData:function(c){if("all"===c){var b={};a.each(this.data.mainImage,function(a,c){b[a]=c});a.each(this.data.thumbnail,function(a,c){b[a]=c});b.caption=this.data.caption;b.layers=this.data.layers;b.html=this.data.html;b.settings=this.data.settings;return b}if("mainImage"===c)return this.data.mainImage;if("caption"===c)return this.data.caption},setData:function(c,b){var d=this;"all"===c?this.data=b:"mainImage"===c?a.each(b,function(a,b){d.data.mainImage[a]=b}):"thumbnail"===c?a.each(b,function(a,
b){d.data.thumbnail[a]=b}):"caption"===c&&(this.data.caption=b)},remove:function(){this.$slide.find(".slide-preview").off("click");this.$slide.find(".delete-slide").off("click");this.$slide.find(".duplicate-slide").off("click");this.$slide.fadeOut(500,function(){a(this).remove()})},updateSlidePreview:function(){var c=this.$slide.find(".slide-preview"),b=this.data.settings.content_type;c.empty();if("undefined"===typeof b||"custom"===b)b=this.data.mainImage.main_image_source,"undefined"!==typeof b&&
""!==b?(a('<img src="'+b+'" />').appendTo(c),this.resizeImage()):a('<p class="no-image">'+sp_js_vars.no_image+"</p>").appendTo(c),this.$slide.removeClass("dynamic-slide")},resizeImage:function(){var a=this.$slide.find(".slide-preview"),b=this.$slide.find(".slide-preview > img");if(b.length)var d=setInterval(function(){!0===b[0].complete&&(clearInterval(d),b.width()/b.height()>a.width()/a.height()?b.css({width:"auto",height:"100%"}):b.css({width:"100%",height:"auto"}))},100)},on:function(a,b){this.events.on(a,
b)},off:function(a){this.events.off(a)},trigger:function(a){this.events.triggerHandler(a)}};var g={open:function(a){var b=[],c=wp.media.editor.insert;wp.media.editor.send.attachment=function(a,c){var d="undefined"!==typeof c.sizes[a.size]?c.sizes[a.size]:c.sizes.full;b.push({id:c.id,url:d.url,alt:c.alt,title:c.title,caption:c.caption,width:d.width,height:d.height})};wp.media.editor.insert=function(d){a.call(this,b);wp.media.editor.insert=c};wp.media.editor.open("media-loader")}},k={previewWindow:null,
slider:null,sliderData:null,open:function(c){var b=this,d=a(".preview-spinner").css({display:"inline-block",visibility:"visible"});a("body").append('<div class="modal-overlay"></div><div class="modal-window-container preview-window">\t<div class="modal-window">\t\t<span class="close-x"></span>\t</div></div>');this.sliderData=c;this.init();a.ajax({url:sp_js_vars.ajaxurl,type:"post",data:{action:"sliderpro_lite_preview_slider",data:JSON.stringify(c)},complete:function(a){b.previewWindow.append(a.responseText);
b.slider=b.previewWindow.find(".slider-pro");b.previewWindow.css("visibility","");d.css({display:"",visibility:""})}})},init:function(){var c=this;a(".modal-window-container").css("top",a(window).scrollTop());this.previewWindow=a(".preview-window .modal-window");this.previewWindow.find(".close-x").on("click",function(a){c.close()});this.previewWindow.css("visibility","hidden");var b=this.sliderData.settings.width,d=this.sliderData.settings.height,e=this.sliderData.settings.visible_size,k=this.sliderData.settings.force_size,
g=this.sliderData.settings.orientation,h=this.sliderData.settings.auto_thumbnail_images,n="top"===this.sliderData.settings.thumbnails_position||"bottom"===this.sliderData.settings.thumbnails_position?"horizontal":"vertical";a.each(this.sliderData.slides,function(a,b){if("undefined"!==typeof b.thumbnail_source&&""!==b.thumbnail_source||"undefined"!==typeof b.thumbnail_content&&""!==b.thumbnail_content)h=!0});"auto"!==e&&("horizontal"===g?b=e:"vertical"===g&&(d=e));"fullWidth"===k?b="100%":"fullWindow"===
k&&(d=b="100%");var m=-1!==b.indexOf("%"),p=-1!==d.indexOf("%");!1===m&&!0===h&&"vertical"===n&&(b=parseInt(b,10)+parseInt(this.sliderData.settings.thumbnail_width,10));a(window).on("resize.sliderPro",function(){!0===m?c.previewWindow.css("width",a(window).width()*(parseInt(b,10)/100)-100):b>=a(window).width()-100?c.previewWindow.css("width",a(window).width()-100):c.previewWindow.css("width",b);!0===p&&c.previewWindow.css("height",a(window).height()*(parseInt(d,10)/100))});a(window).trigger("resize")},
close:function(){this.previewWindow.find(".close-x").off("click");a(window).off("resize.sliderPro");this.slider.sliderPro("destroy");a("body").find(".modal-overlay, .modal-window-container").remove()}};a(document).ready(function(){h.init()})})(jQuery);
(function(a){var h=function(e,g){this.options=g;this.$container=a(e);this.$placeholder=this.$selectedChild=null;this.initialMouseY=this.initialMouseX=this.slideInitialY=this.slideInitialX=this.currentMouseY=this.currentMouseX=0;this.isDragging=!1;this.checkHover=0;this.uid=(new Date).valueOf();this.events=a({});this.endPosition=this.startPosition=0;this.init()};h.prototype={init:function(){this.settings=a.extend({},this.defaults,this.options);this.$container.on("mousedown.lightSortable"+this.uid,
a.proxy(this._onDragStart,this));a(document).on("mousemove.lightSortable."+this.uid,a.proxy(this._onDragging,this));a(document).on("mouseup.lightSortable."+this.uid,a.proxy(this._onDragEnd,this))},_onDragStart:function(e){1!==e.which||a(e.target).is("select")||a(e.target).is("input")||a(e.target).is("a")||(this.$selectedChild=a(e.target).is(this.settings.children)?a(e.target):a(e.target).parents(this.settings.children),1===this.$selectedChild.length&&(this.initialMouseX=e.pageX,this.initialMouseY=
e.pageY,this.slideInitialX=this.$selectedChild.position().left,this.slideInitialY=this.$selectedChild.position().top,this.startPosition=this.$selectedChild.index(),e.preventDefault()))},_onDragging:function(e){if(null!==this.$selectedChild&&0!==this.$selectedChild.length){e.preventDefault();this.currentMouseX=e.pageX;this.currentMouseY=e.pageY;if(!this.isDragging){this.isDragging=!0;this.trigger({type:"sortStart"});a.isFunction(this.settings.sortStart)&&this.settings.sortStart.call(this,{type:"sortStart"});
e=this.$container.is("ul")||this.$container.is("ol")?"li":"div";this.$placeholder=a("<"+e+">").addClass("ls-ignore "+this.settings.placeholder).insertAfter(this.$selectedChild);0===this.$placeholder.width()&&this.$placeholder.css("width",this.$selectedChild.outerWidth());0===this.$placeholder.height()&&this.$placeholder.css("height",this.$selectedChild.outerHeight());this.$selectedChild.css({"pointer-events":"none",position:"absolute",left:this.$selectedChild.position().left,top:this.$selectedChild.position().top,
width:this.$selectedChild.width(),height:this.$selectedChild.height()}).addClass("ls-ignore");this.$container.append(this.$selectedChild);a("body").css("user-select","none");var g=this;this.checkHover=setInterval(function(){g.$container.find(g.settings.children).not(".ls-ignore").each(function(){var e=a(this);g.currentMouseX>e.offset().left&&g.currentMouseX<e.offset().left+e.width()&&g.currentMouseY>e.offset().top&&g.currentMouseY<e.offset().top+e.height()&&(e.index()>=g.$placeholder.index()?g.$placeholder.insertAfter(e):
g.$placeholder.insertBefore(e))})},200)}this.$selectedChild.css({left:this.currentMouseX-this.initialMouseX+this.slideInitialX,top:this.currentMouseY-this.initialMouseY+this.slideInitialY})}},_onDragEnd:function(){this.isDragging&&(this.isDragging=!1,a("body").css("user-select",""),this.$selectedChild.css({position:"",left:"",top:"",width:"",height:"","pointer-events":""}).removeClass("ls-ignore").insertAfter(this.$placeholder),this.$placeholder.remove(),clearInterval(this.checkHover),this.endPosition=
this.$selectedChild.index(),this.trigger({type:"sortEnd"}),a.isFunction(this.settings.sortEnd)&&this.settings.sortEnd.call(this,{type:"sortEnd",startPosition:this.startPosition,endPosition:this.endPosition}));this.$selectedChild=null},destroy:function(){this.$container.removeData("lightSortable");this.isDragging&&this._onDragEnd();this.$container.off("mousedown.lightSortable."+this.uid);a(document).off("mousemove.lightSortable."+this.uid);a(document).off("mouseup.lightSortable."+this.uid)},on:function(a,
g){return this.events.on(a,g)},off:function(a){return this.events.off(a)},trigger:function(a){return this.events.triggerHandler(a)},defaults:{placeholder:"",sortStart:function(){},sortEnd:function(){}}};a.fn.lightSortable=function(e){var g=Array.prototype.slice.call(arguments,1);return this.each(function(){if("undefined"===typeof a(this).data("lightSortable")){var k=new h(this,e);a(this).data("lightSortable",k)}else"undefined"!==typeof e&&(k=a(this).data("lightSortable"),"function"===typeof k[e]?
k[e].apply(k,g):a.error(e+" does not exist in lightSortable."))})}})(jQuery);(function(a){a.lightURLParse=function(h){h=h.split("?")[1].split("&");var e=[];a.each(h,function(a,h){var c=h.split("=");e[c[0]]=c[1]});return e}})(jQuery);